global:
  resolve_timeout: 5m

  smtp_smarthost: "{{ lookup('env', 'ALERTMANAGER_SMTP_SMARTHOST') }}"
  smtp_from: "{{ lookup('env', 'ALERTMANAGER_SMTP_FROM') }}"
  smtp_auth_username: "{{ lookup('env', 'ALERTMANAGER_SMTP_USER') }}"
  smtp_auth_password: "{{ lookup('env', 'ALERTMANAGER_SMTP_PASS') }}"
  smtp_require_tls: true

route:
  receiver: "default"
  group_by: ["alertname", "severity"]
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 3h

receivers:
  - name: "default"
    email_configs:
      - to: "{{ lookup('env', 'ALERTMANAGER_SMTP_TO')  | default(lookup('env', 'ALERTMANAGER_SMTP_FROM')) }}"
        send_resolved: true
